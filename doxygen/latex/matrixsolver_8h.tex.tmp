\hypertarget{matrixsolver_8h}{}\section{/home/jesse/\+Dropbox/\+Git/\+C\+Prop/headers/matrixsolver.h File Reference}
\label{matrixsolver_8h}\index{/home/jesse/\+Dropbox/\+Git/\+C\+Prop/headers/matrixsolver.\+h@{/home/jesse/\+Dropbox/\+Git/\+C\+Prop/headers/matrixsolver.\+h}}


Functions for solving the linear system that arises when optimizing the single propeller circulation distribution.  


{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$gsl/gsl\+\_\+linalg.\+h$>$}\newline
{\ttfamily \#include $<$gsl/gsl\+\_\+matrix.\+h$>$}\Newline
Include dependency graph for matrixsolver.\+h\+:
% FIG 0
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structpropinfo}{propinfo}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{matrixsolver_8h_a62835bacd43e817c2f60e8af0196c7f3}{fill\+Matrix} (double $\ast$rc, double $\ast$rv, gsl\+\_\+matrix $\ast$matrix, double $\ast$betav, double $\ast$ut, double $\ast$Va, double $\ast$Vt, double l, double dimfactor, struct \hyperlink{structpropinfo}{propinfo} \hyperlink{structpropinfo}{propinfo})
\begin{DoxyCompactList}\small\item\em fills matrix pointed to by matrix with values for linear problem \end{DoxyCompactList}\item 
void \hyperlink{matrixsolver_8h_ab708c0dd5e9314f5041d2707fff5a21e}{create\+Vortex\+Control\+Points} (double $\ast$rc, double $\ast$rv, struct \hyperlink{structpropinfo}{propinfo} \hyperlink{structpropinfo}{propinfo})
\begin{DoxyCompactList}\small\item\em fills arrays of control and vortex point radii \end{DoxyCompactList}\item 
void \hyperlink{matrixsolver_8h_ae75d501c32e12776030d5bbecede2d3b}{fill\+R\+H\+Svector} (double $\ast$rc, double $\ast$rv, gsl\+\_\+vector $\ast$rhsvector, double dimfactor, struct \hyperlink{structpropinfo}{propinfo} \hyperlink{structpropinfo}{propinfo}, double $\ast$Va, double $\ast$ua, double $\ast$V, double $\ast$c, double $\ast$Cd)
\begin{DoxyCompactList}\small\item\em Fills vector on right-\/hand side of the linear equation. \end{DoxyCompactList}\item 
void \hyperlink{matrixsolver_8h_ad33d89dd4d8410dcc0199d5f2de5933a}{solve\+Linear\+Equation} (gsl\+\_\+matrix $\ast$matrix, gsl\+\_\+vector $\ast$vector, gsl\+\_\+vector $\ast$solution)
\begin{DoxyCompactList}\small\item\em Solves a vector-\/matrix equation of the form Ax = b. \end{DoxyCompactList}\item 
void \hyperlink{matrixsolver_8h_a2238970c1dcc0b266cb21520d779ae0d}{compute\+Velocities} (double $\ast$rc, double $\ast$rv, double $\ast$tangent, double $\ast$axial, gsl\+\_\+vector $\ast$circulation, double $\ast$betav, struct \hyperlink{structpropinfo}{propinfo} \hyperlink{structpropinfo}{propinfo})
\begin{DoxyCompactList}\small\item\em computes axial and tangential velocities from circulation \end{DoxyCompactList}\item 
void \hyperlink{matrixsolver_8h_a631fc1519e55a4454be578bc7b5eafb3}{compute\+Total\+Velocity} (double $\ast$rc, double $\ast$rv, double $\ast$V, double $\ast$ua, double $\ast$ut, double $\ast$Va, double $\ast$Vt, struct \hyperlink{structpropinfo}{propinfo} \hyperlink{structpropinfo}{propinfo})
\begin{DoxyCompactList}\small\item\em computes total velocity on lifting line \end{DoxyCompactList}\item 
void \hyperlink{matrixsolver_8h_a3fbba0aa562ba6c2a940dfc2abfee6a7}{compute\+New\+Beta} (double $\ast$rc, double $\ast$rv, double $\ast$beta, double $\ast$ua, double $\ast$ut, double $\ast$Va, double $\ast$Vt, struct \hyperlink{structpropinfo}{propinfo} \hyperlink{structpropinfo}{propinfo})
\begin{DoxyCompactList}\small\item\em computes new pitch angles corresponding to induced velocities \end{DoxyCompactList}\item 
void \hyperlink{matrixsolver_8h_addd4a122229f7854fc8ab1fccfe83048}{interpolate\+Vortex\+Beta} (double $\ast$rc, double $\ast$rv, double $\ast$beta, double $\ast$betav, struct \hyperlink{structpropinfo}{propinfo} \hyperlink{structpropinfo}{propinfo})
\begin{DoxyCompactList}\small\item\em Linearly interpolates control point pitch angles to find vortex point values. \end{DoxyCompactList}\item 
int \hyperlink{matrixsolver_8h_a147d4b9e270631e388a910bae1550d47}{solve\+System\+Iteratively} (double threshold, int itermax, gsl\+\_\+vector $\ast$solution, double l, double $\ast$beta, double $\ast$V, double $\ast$Va, double $\ast$Vt, double $\ast$c, double $\ast$Cd, struct \hyperlink{structpropinfo}{propinfo} \hyperlink{structpropinfo}{propinfo})
\begin{DoxyCompactList}\small\item\em Solves the nonlinear system by iteratively solving the linearized system. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Functions for solving the linear system that arises when optimizing the single propeller circulation distribution. 

\begin{DoxyAuthor}{Author}
Jesse van Rhijn 
\end{DoxyAuthor}


\subsection{Function Documentation}
\mbox{\Hypertarget{matrixsolver_8h_a3fbba0aa562ba6c2a940dfc2abfee6a7}\label{matrixsolver_8h_a3fbba0aa562ba6c2a940dfc2abfee6a7}} 
\index{matrixsolver.\+h@{matrixsolver.\+h}!compute\+New\+Beta@{compute\+New\+Beta}}
\index{compute\+New\+Beta@{compute\+New\+Beta}!matrixsolver.\+h@{matrixsolver.\+h}}
\subsubsection{\texorpdfstring{compute\+New\+Beta()}{computeNewBeta()}}
{\footnotesize\ttfamily void compute\+New\+Beta (\begin{DoxyParamCaption}\item[{double $\ast$}]{rc,  }\item[{double $\ast$}]{rv,  }\item[{double $\ast$}]{beta,  }\item[{double $\ast$}]{ua,  }\item[{double $\ast$}]{ut,  }\item[{double $\ast$}]{Va,  }\item[{double $\ast$}]{Vt,  }\item[{struct \hyperlink{structpropinfo}{propinfo}}]{propinfo }\end{DoxyParamCaption})}



computes new pitch angles corresponding to induced velocities 


\begin{DoxyParams}{Parameters}
{\em rc} & control points \\
\hline
{\em rv} & vortex points \\
\hline
{\em beta} & hydrodynamic pitch angle at control points \\
\hline
{\em ua} & axial induced velocity on lifting line \\
\hline
{\em ut} & tangential induced velocity on lifting line \\
\hline
{\em Va} & axial inflow velocity on lifting line \\
\hline
{\em Vt} & tangential inflow velocity on lifting line \\
\hline
{\em propinfo} & struct with propeller info \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{matrixsolver_8h_a631fc1519e55a4454be578bc7b5eafb3}\label{matrixsolver_8h_a631fc1519e55a4454be578bc7b5eafb3}} 
\index{matrixsolver.\+h@{matrixsolver.\+h}!compute\+Total\+Velocity@{compute\+Total\+Velocity}}
\index{compute\+Total\+Velocity@{compute\+Total\+Velocity}!matrixsolver.\+h@{matrixsolver.\+h}}
\subsubsection{\texorpdfstring{compute\+Total\+Velocity()}{computeTotalVelocity()}}
{\footnotesize\ttfamily void compute\+Total\+Velocity (\begin{DoxyParamCaption}\item[{double $\ast$}]{rc,  }\item[{double $\ast$}]{rv,  }\item[{double $\ast$}]{V,  }\item[{double $\ast$}]{ua,  }\item[{double $\ast$}]{ut,  }\item[{double $\ast$}]{Va,  }\item[{double $\ast$}]{Vt,  }\item[{struct \hyperlink{structpropinfo}{propinfo}}]{propinfo }\end{DoxyParamCaption})}



computes total velocity on lifting line 


\begin{DoxyParams}{Parameters}
{\em rc} & control points \\
\hline
{\em rv} & vortex points \\
\hline
{\em ua} & axial induced velocity on lifting line \\
\hline
{\em ut} & tangential induced velocity on lifting line \\
\hline
{\em Va} & axial inflow velocity on lifting line \\
\hline
{\em Vt} & tangential inflow velocity on lifting line \\
\hline
{\em propinfo} & struct with propeller info \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{matrixsolver_8h_a2238970c1dcc0b266cb21520d779ae0d}\label{matrixsolver_8h_a2238970c1dcc0b266cb21520d779ae0d}} 
\index{matrixsolver.\+h@{matrixsolver.\+h}!compute\+Velocities@{compute\+Velocities}}
\index{compute\+Velocities@{compute\+Velocities}!matrixsolver.\+h@{matrixsolver.\+h}}
\subsubsection{\texorpdfstring{compute\+Velocities()}{computeVelocities()}}
{\footnotesize\ttfamily void compute\+Velocities (\begin{DoxyParamCaption}\item[{double $\ast$}]{rc,  }\item[{double $\ast$}]{rv,  }\item[{double $\ast$}]{tangent,  }\item[{double $\ast$}]{axial,  }\item[{gsl\+\_\+vector $\ast$}]{circulation,  }\item[{double $\ast$}]{betav,  }\item[{struct \hyperlink{structpropinfo}{propinfo}}]{propinfo }\end{DoxyParamCaption})}



computes axial and tangential velocities from circulation 


\begin{DoxyParams}{Parameters}
{\em rc} & control points \\
\hline
{\em rv} & vortex points \\
\hline
{\em tangent} & pointer to tangential velocity array \\
\hline
{\em axial} & pointer to axial velocity array \\
\hline
{\em ciculation} & vector of circulation \\
\hline
{\em betav} & hydrodynamic pitch angle at vortex points \\
\hline
{\em propinfo} & struct with propeller info \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{matrixsolver_8h_ab708c0dd5e9314f5041d2707fff5a21e}\label{matrixsolver_8h_ab708c0dd5e9314f5041d2707fff5a21e}} 
\index{matrixsolver.\+h@{matrixsolver.\+h}!create\+Vortex\+Control\+Points@{create\+Vortex\+Control\+Points}}
\index{create\+Vortex\+Control\+Points@{create\+Vortex\+Control\+Points}!matrixsolver.\+h@{matrixsolver.\+h}}
\subsubsection{\texorpdfstring{create\+Vortex\+Control\+Points()}{createVortexControlPoints()}}
{\footnotesize\ttfamily void create\+Vortex\+Control\+Points (\begin{DoxyParamCaption}\item[{double $\ast$}]{rc,  }\item[{double $\ast$}]{rv,  }\item[{struct \hyperlink{structpropinfo}{propinfo}}]{propinfo }\end{DoxyParamCaption})}



fills arrays of control and vortex point radii 


\begin{DoxyParams}{Parameters}
{\em rc} & pointer to array with control points \\
\hline
{\em rv} & pointer to array with vortex points \\
\hline
{\em propinfo} & struct with constant propeller info \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{matrixsolver_8h_a62835bacd43e817c2f60e8af0196c7f3}\label{matrixsolver_8h_a62835bacd43e817c2f60e8af0196c7f3}} 
\index{matrixsolver.\+h@{matrixsolver.\+h}!fill\+Matrix@{fill\+Matrix}}
\index{fill\+Matrix@{fill\+Matrix}!matrixsolver.\+h@{matrixsolver.\+h}}
\subsubsection{\texorpdfstring{fill\+Matrix()}{fillMatrix()}}
{\footnotesize\ttfamily void fill\+Matrix (\begin{DoxyParamCaption}\item[{double $\ast$}]{rc,  }\item[{double $\ast$}]{rv,  }\item[{gsl\+\_\+matrix $\ast$}]{matrix,  }\item[{double $\ast$}]{betav,  }\item[{double $\ast$}]{ut,  }\item[{double $\ast$}]{Va,  }\item[{double $\ast$}]{Vt,  }\item[{double}]{l,  }\item[{double}]{dimfactor,  }\item[{struct \hyperlink{structpropinfo}{propinfo}}]{propinfo }\end{DoxyParamCaption})}



fills matrix pointed to by matrix with values for linear problem 


\begin{DoxyParams}{Parameters}
{\em rc} & control points \\
\hline
{\em rv} & vortex points \\
\hline
{\em matrix} & gsl\+\_\+matrix to fill \\
\hline
{\em betav} & array of pitch angle values at vortex points \\
\hline
{\em ut} & array of tangential induced velocities \\
\hline
{\em Va} & array of axial inflow velocity \\
\hline
{\em Vt} & array of tangential inflow velocity \\
\hline
{\em l} & frozen lagrange multiplier \\
\hline
{\em dimfactor} & dimensionalization factor \\
\hline
{\em propinfo} & struct with constant propeller info \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{matrixsolver_8h_ae75d501c32e12776030d5bbecede2d3b}\label{matrixsolver_8h_ae75d501c32e12776030d5bbecede2d3b}} 
\index{matrixsolver.\+h@{matrixsolver.\+h}!fill\+R\+H\+Svector@{fill\+R\+H\+Svector}}
\index{fill\+R\+H\+Svector@{fill\+R\+H\+Svector}!matrixsolver.\+h@{matrixsolver.\+h}}
\subsubsection{\texorpdfstring{fill\+R\+H\+Svector()}{fillRHSvector()}}
{\footnotesize\ttfamily void fill\+R\+H\+Svector (\begin{DoxyParamCaption}\item[{double $\ast$}]{rc,  }\item[{double $\ast$}]{rv,  }\item[{gsl\+\_\+vector $\ast$}]{rhsvector,  }\item[{double}]{dimfactor,  }\item[{struct \hyperlink{structpropinfo}{propinfo}}]{propinfo,  }\item[{double $\ast$}]{Va,  }\item[{double $\ast$}]{ua,  }\item[{double $\ast$}]{V,  }\item[{double $\ast$}]{c,  }\item[{double $\ast$}]{Cd }\end{DoxyParamCaption})}



Fills vector on right-\/hand side of the linear equation. 


\begin{DoxyParams}{Parameters}
{\em rc} & control points \\
\hline
{\em rv} & vortex points \\
\hline
{\em rhsvector} & gsl\+\_\+vector to fill \\
\hline
{\em propinfo} & struct containing constant propeller info \\
\hline
{\em Va} & array of propeller inflow values \\
\hline
{\em ua} & array of axial induced velocity \\
\hline
{\em V} & array of total induced velocity \\
\hline
{\em c} & array of chord lenght, normalized by radius \\
\hline
{\em Cd} & array of sectional drag coefficients \\
\hline
{\em dimfactor} & redimensionalization factor for drag force \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{matrixsolver_8h_addd4a122229f7854fc8ab1fccfe83048}\label{matrixsolver_8h_addd4a122229f7854fc8ab1fccfe83048}} 
\index{matrixsolver.\+h@{matrixsolver.\+h}!interpolate\+Vortex\+Beta@{interpolate\+Vortex\+Beta}}
\index{interpolate\+Vortex\+Beta@{interpolate\+Vortex\+Beta}!matrixsolver.\+h@{matrixsolver.\+h}}
\subsubsection{\texorpdfstring{interpolate\+Vortex\+Beta()}{interpolateVortexBeta()}}
{\footnotesize\ttfamily void interpolate\+Vortex\+Beta (\begin{DoxyParamCaption}\item[{double $\ast$}]{rc,  }\item[{double $\ast$}]{rv,  }\item[{double $\ast$}]{beta,  }\item[{double $\ast$}]{betav,  }\item[{struct \hyperlink{structpropinfo}{propinfo}}]{propinfo }\end{DoxyParamCaption})}



Linearly interpolates control point pitch angles to find vortex point values. 


\begin{DoxyParams}{Parameters}
{\em rc} & control points \\
\hline
{\em rv} & vortex points \\
\hline
{\em beta} & hydrodynamic pitch angle at control points \\
\hline
{\em ua} & axial induced velocity on lifting line \\
\hline
{\em ut} & tangential induced velocity on lifting line \\
\hline
{\em Va} & axial inflow velocity on lifting line \\
\hline
{\em Vt} & tangential inflow velocity on lifting line \\
\hline
{\em propinfo} & struct with propeller info \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{matrixsolver_8h_ad33d89dd4d8410dcc0199d5f2de5933a}\label{matrixsolver_8h_ad33d89dd4d8410dcc0199d5f2de5933a}} 
\index{matrixsolver.\+h@{matrixsolver.\+h}!solve\+Linear\+Equation@{solve\+Linear\+Equation}}
\index{solve\+Linear\+Equation@{solve\+Linear\+Equation}!matrixsolver.\+h@{matrixsolver.\+h}}
\subsubsection{\texorpdfstring{solve\+Linear\+Equation()}{solveLinearEquation()}}
{\footnotesize\ttfamily void solve\+Linear\+Equation (\begin{DoxyParamCaption}\item[{gsl\+\_\+matrix $\ast$}]{matrix,  }\item[{gsl\+\_\+vector $\ast$}]{vector,  }\item[{gsl\+\_\+vector $\ast$}]{solution }\end{DoxyParamCaption})}



Solves a vector-\/matrix equation of the form Ax = b. 


\begin{DoxyParams}{Parameters}
{\em matrix} & gsl\+\_\+matrix of system coefficiencts \\
\hline
{\em vector} & right-\/hand side vector \\
\hline
{\em solution} & gsl\+\_\+vector to contain solution \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{matrixsolver_8h_a147d4b9e270631e388a910bae1550d47}\label{matrixsolver_8h_a147d4b9e270631e388a910bae1550d47}} 
\index{matrixsolver.\+h@{matrixsolver.\+h}!solve\+System\+Iteratively@{solve\+System\+Iteratively}}
\index{solve\+System\+Iteratively@{solve\+System\+Iteratively}!matrixsolver.\+h@{matrixsolver.\+h}}
\subsubsection{\texorpdfstring{solve\+System\+Iteratively()}{solveSystemIteratively()}}
{\footnotesize\ttfamily int solve\+System\+Iteratively (\begin{DoxyParamCaption}\item[{double}]{threshold,  }\item[{int}]{itermax,  }\item[{gsl\+\_\+vector $\ast$}]{solution,  }\item[{double}]{l,  }\item[{double $\ast$}]{beta,  }\item[{double $\ast$}]{V,  }\item[{double $\ast$}]{Va,  }\item[{double $\ast$}]{Vt,  }\item[{double $\ast$}]{c,  }\item[{double $\ast$}]{Cd,  }\item[{struct \hyperlink{structpropinfo}{propinfo}}]{propinfo }\end{DoxyParamCaption})}



Solves the nonlinear system by iteratively solving the linearized system. 


\begin{DoxyParams}{Parameters}
{\em threshold} & fractional change input_ lagrange multiplier required for convergence \\
\hline
{\em itermax} & maximum number of iterations \\
\hline
{\em solution} & pointer to solution vector \\
\hline
{\em beta} & pointer to beta hydrodynamic pitch angle at control points \\
\hline
{\em V} & pointer to total velocity values \\
\hline
{\em Va} & given axial inflow velocity values \\
\hline
{\em Vt} & given tangential inflow velocity values \\
\hline
{\em c} & given chord length array \\
\hline
{\em Cd} & Given sectional drag coefficients \\
\hline
{\em propinfo} & struct with propeller info \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
number of iterations run before convergence, -\/1 if not converged 
\end{DoxyReturn}
